(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[2508],{22508:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Commands:()=>w,default:()=>_,tabSpaceStatus:()=>k});var o,a=n(93226),d=n(80430),r=n(13631),i=n(35984),c=n(32364),s=n(12852),l=n(49174),u=n(59586),m=n(96987),g=n(82113),f=n(86082),C=n(27529),p=n(82090),b=n(4324);!function(e){e.createNew="fileeditor:create-new",e.createNewMarkdown="fileeditor:create-new-markdown-file",e.changeFontSize="fileeditor:change-font-size",e.lineNumbers="fileeditor:toggle-line-numbers",e.lineWrap="fileeditor:toggle-line-wrap",e.changeTabs="fileeditor:change-tabs",e.matchBrackets="fileeditor:toggle-match-brackets",e.autoClosingBrackets="fileeditor:toggle-autoclosing-brackets",e.createConsole="fileeditor:create-console",e.replaceSelection="fileeditor:replace-selection",e.runCode="fileeditor:run-code",e.runAllCode="fileeditor:run-all",e.markdownPreview="fileeditor:markdown-preview",e.undo="fileeditor:undo",e.redo="fileeditor:redo",e.cut="fileeditor:cut",e.copy="fileeditor:copy",e.paste="fileeditor:paste",e.selectAll="fileeditor:select-all"}(o||(o={}));const h="Editor";let x=Object.assign({},r.CodeEditor.defaultConfig);var w;!function(e){function t(e){return async function(t,n){var o;const a=n||{},d=await e.execute("console:create",{activate:a.activate,name:null===(o=t.context.contentsModel)||void 0===o?void 0:o.name,path:t.context.path,preferredLanguage:t.context.model.defaultKernelLanguage,ref:t.id,insertMode:"split-bottom"});t.context.pathChanged.connect(((e,n)=>{var o;d.session.setPath(n),d.session.setName(null===(o=t.context.contentsModel)||void 0===o?void 0:o.name)}))}}function n(e){const t=["lineNumbers","lineWrap","matchBrackets"],n=e.editor;Object.keys(x).forEach((e=>{t.includes(e)||n.setOption(e,x[e])}))}function a(e,t,n,a){e.addCommand(o.changeFontSize,{execute:e=>{const n=Number(e.delta);if(Number.isNaN(n))return void console.error(`${o.changeFontSize}: delta arg must be a number`);const d=window.getComputedStyle(document.documentElement),r=parseInt(d.getPropertyValue("--jp-code-font-size"),10),i=x.fontSize||r;return x.fontSize=i+n,t.set(a,"editorConfig",x).catch((e=>{console.error(`Failed to set ${a}: ${e.message}`)}))},label:e=>e.name})}function i(e,t,n,a,d){e.addCommand(o.lineNumbers,{execute:()=>(x.lineNumbers=!x.lineNumbers,t.set(a,"editorConfig",x).catch((e=>{console.error(`Failed to set ${a}: ${e.message}`)}))),isEnabled:d,isToggled:()=>x.lineNumbers,label:n.__("Line Numbers")})}function c(e,t,n,a,d){e.addCommand(o.lineWrap,{execute:e=>(x.lineWrap=e.mode||"off",t.set(a,"editorConfig",x).catch((e=>{console.error(`Failed to set ${a}: ${e.message}`)}))),isEnabled:d,isToggled:e=>{const t=e.mode||"off";return x.lineWrap===t},label:n.__("Word Wrap")})}function s(e,t,n,a){e.addCommand(o.changeTabs,{label:e=>e.name,execute:e=>(x.tabSize=e.size||4,x.insertSpaces=!!e.insertSpaces,t.set(a,"editorConfig",x).catch((e=>{console.error(`Failed to set ${a}: ${e.message}`)}))),isToggled:e=>{const t=!!e.insertSpaces,n=e.size||4;return x.insertSpaces===t&&x.tabSize===n}})}function l(e,t,n,a,d){e.addCommand(o.matchBrackets,{execute:()=>(x.matchBrackets=!x.matchBrackets,t.set(a,"editorConfig",x).catch((e=>{console.error(`Failed to set ${a}: ${e.message}`)}))),label:n.__("Match Brackets"),isEnabled:d,isToggled:()=>x.matchBrackets})}function u(e,t,n,a){e.addCommand(o.autoClosingBrackets,{execute:()=>(x.autoClosingBrackets=!x.autoClosingBrackets,t.set(a,"editorConfig",x).catch((e=>{console.error(`Failed to set ${a}: ${e.message}`)}))),label:n.__("Auto Close Brackets for Text Editor"),isToggled:()=>x.autoClosingBrackets})}function m(e,t,n,a){e.addCommand(o.replaceSelection,{execute:e=>{var n,o;const a=e.text||"",d=t.currentWidget;d&&(null===(o=(n=d.content.editor).replaceSelection)||void 0===o||o.call(n,a))},isEnabled:a,label:n.__("Replace Selection in Editor")})}function g(e,n,a,d){e.addCommand(o.createConsole,{execute:o=>{const a=n.currentWidget;if(a)return t(e)(a,o)},isEnabled:d,label:a.__("Create Console for Editor")})}function f(e,t,n,a){e.addCommand(o.runCode,{execute:()=>{var n;const o=null===(n=t.currentWidget)||void 0===n?void 0:n.content;if(!o)return;let a="";const d=o.editor,r=o.context.path,i=p.PathExt.extname(r),c=d.getSelection(),{start:s,end:l}=c;let u=s.column!==l.column||s.line!==l.line;if(u){const e=d.getOffsetAt(c.start),t=d.getOffsetAt(c.end);a=d.model.value.text.substring(e,t)}else if(p.MarkdownCodeBlocks.isMarkdown(i)){const{text:e}=d.model.value,t=p.MarkdownCodeBlocks.findMarkdownCodeBlocks(e);for(const e of t)if(e.startLine<=s.line&&s.line<=e.endLine){a=e.code,u=!0;break}}if(!u){a=d.getLine(c.start.line);const e=d.getCursorPosition();if(e.line+1===d.lineCount){const e=d.model.value.text;d.model.value.text=e+"\n"}d.setCursorPosition({line:e.line+1,column:e.column})}return a?e.execute("console:inject",{activate:!1,code:a,path:r}):Promise.resolve(void 0)},isEnabled:a,label:n.__("Run Code")})}function w(e,t,n,a){e.addCommand(o.runAllCode,{execute:()=>{var n;const o=null===(n=t.currentWidget)||void 0===n?void 0:n.content;if(!o)return;let a="";const d=o.editor.model.value.text,r=o.context.path,i=p.PathExt.extname(r);if(p.MarkdownCodeBlocks.isMarkdown(i)){const e=p.MarkdownCodeBlocks.findMarkdownCodeBlocks(d);for(const t of e)a+=t.code}else a=d;return a?e.execute("console:inject",{activate:!1,code:a,path:r}):Promise.resolve(void 0)},isEnabled:a,label:n.__("Run All Code")})}function v(e,t,n){e.addCommand(o.markdownPreview,{execute:()=>{const n=t.currentWidget;if(!n)return;const o=n.context.path;return e.execute("markdownviewer:open",{path:o,options:{mode:"split-right"}})},isVisible:()=>{const e=t.currentWidget;return e&&".md"===p.PathExt.extname(e.context.path)||!1},label:n.__("Show Markdown Preview")})}function k(e,t,n,a){e.addCommand(o.undo,{execute:()=>{var e;const n=null===(e=t.currentWidget)||void 0===e?void 0:e.content;n&&n.editor.undo()},isEnabled:()=>{var e;return!!a()&&!!(null===(e=t.currentWidget)||void 0===e?void 0:e.content)},icon:b.undoIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Undo")})}function _(e,t,n,a){e.addCommand(o.redo,{execute:()=>{var e;const n=null===(e=t.currentWidget)||void 0===e?void 0:e.content;n&&n.editor.redo()},isEnabled:()=>{var e;return!!a()&&!!(null===(e=t.currentWidget)||void 0===e?void 0:e.content)},icon:b.redoIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Redo")})}function M(e,t,n,a){e.addCommand(o.cut,{execute:()=>{var e;const n=null===(e=t.currentWidget)||void 0===e?void 0:e.content;if(!n)return;const o=n.editor,a=y(o);d.Clipboard.copyToSystem(a),o.replaceSelection&&o.replaceSelection("")},isEnabled:()=>{var e;if(!a())return!1;const n=null===(e=t.currentWidget)||void 0===e?void 0:e.content;return!!n&&E(n.editor)},icon:b.cutIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Cut")})}function S(e,t,n,a){e.addCommand(o.copy,{execute:()=>{var e;const n=null===(e=t.currentWidget)||void 0===e?void 0:e.content;if(!n)return;const o=y(n.editor);d.Clipboard.copyToSystem(o)},isEnabled:()=>{var e;if(!a())return!1;const n=null===(e=t.currentWidget)||void 0===e?void 0:e.content;return!!n&&E(n.editor)},icon:b.copyIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Copy")})}function T(e,t,n,a){e.addCommand(o.paste,{execute:async()=>{var e;const n=null===(e=t.currentWidget)||void 0===e?void 0:e.content;if(!n)return;const o=n.editor,a=window.navigator.clipboard,d=await a.readText();d&&o.replaceSelection&&o.replaceSelection(d)},isEnabled:()=>{var e;return Boolean(a()&&(null===(e=t.currentWidget)||void 0===e?void 0:e.content))},icon:b.pasteIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Paste")})}function I(e,t,n,a){e.addCommand(o.selectAll,{execute:()=>{var e;const n=null===(e=t.currentWidget)||void 0===e?void 0:e.content;n&&n.editor.execCommand("selectAll")},isEnabled:()=>{var e;return Boolean(a()&&(null===(e=t.currentWidget)||void 0===e?void 0:e.content))},label:n.__("Select All")})}function E(e){const t=e.getSelection(),{start:n,end:o}=t;return n.column!==o.column||n.line!==o.line}function y(e){const t=e.getSelection(),n=e.getOffsetAt(t.start),o=e.getOffsetAt(t.end);return e.model.value.text.substring(n,o)}function W(e,t,n="txt"){return e.execute("docmanager:new-untitled",{path:t,type:"file",ext:n}).then((t=>e.execute("docmanager:open",{path:t.path,factory:h})))}function F(e,t,n){e.addCommand(o.createNew,{label:e=>e.isPalette?n.__("New Text File"):n.__("Text File"),caption:n.__("Create a new text file"),icon:e=>e.isPalette?void 0:b.textEditorIcon,execute:n=>{const o=n.cwd||t.defaultBrowser.model.path;return W(e,o)}})}function N(e,t,n){e.addCommand(o.createNewMarkdown,{label:e=>e.isPalette?n.__("New Markdown File"):n.__("Markdown File"),caption:n.__("Create a new markdown file"),icon:e=>e.isPalette?void 0:b.markdownIcon,execute:n=>{const o=n.cwd||t.defaultBrowser.model.path;return W(e,o,"md")}})}function P(e,t){e.add({command:o.createNew,category:t.__("Other"),rank:1})}function B(e,t){e.add({command:o.createNewMarkdown,category:t.__("Other"),rank:2})}function A(e,t){const n=t.__("Text Editor"),o={insertSpaces:!1,size:4,name:t.__("Indent with Tab")},a="fileeditor:change-tabs";e.addItem({command:a,args:o,category:n});for(const o of[1,2,4,8]){const d={insertSpaces:!0,size:o,name:t._n("Spaces: %1","Spaces: %1",o)};e.addItem({command:a,args:d,category:n})}}function O(e,t){const n=t.__("Text Editor");e.addItem({command:o.createNew,args:{isPalette:!0},category:n})}function R(e,t){const n=t.__("Text Editor");e.addItem({command:o.createNewMarkdown,args:{isPalette:!0},category:n})}function z(e,t){const n=t.__("Text Editor"),a=o.changeFontSize;let d={name:t.__("Increase Font Size"),delta:1};e.addItem({command:a,args:d,category:n}),d={name:t.__("Decrease Font Size"),delta:-1},e.addItem({command:a,args:d,category:n})}function j(e,t,n){const a=new C.Menu({commands:t});a.title.label=n.__("Text Editor Indentation");const d={insertSpaces:!1,size:4,name:n.__("Indent with Tab")},r="fileeditor:change-tabs";a.addItem({command:r,args:d});for(const e of[1,2,4,8]){const t={insertSpaces:!0,size:e,name:n._n("Spaces: %1","Spaces: %1",e)};a.addItem({command:r,args:t})}e.settingsMenu.addGroup([{command:o.changeFontSize,args:{name:n.__("Increase Text Editor Font Size"),delta:1}},{command:o.changeFontSize,args:{name:n.__("Decrease Text Editor Font Size"),delta:-1}},{type:"submenu",submenu:a},{command:o.autoClosingBrackets}],30)}function L(e){e.fileMenu.newMenu.addGroup([{command:o.createNew}],30)}function $(e){e.fileMenu.newMenu.addGroup([{command:o.createNewMarkdown}],30)}function U(e,t){e.editMenu.undoers.add({tracker:t,undo:e=>{e.content.editor.undo()},redo:e=>{e.content.editor.redo()}})}function V(e,t,n){e.viewMenu.editorViewers.add({tracker:t,toggleLineNumbers:e=>{const t=!e.content.editor.getOption("lineNumbers");e.content.editor.setOption("lineNumbers",t)},toggleWordWrap:e=>{const t="off"===e.content.editor.getOption("lineWrap")?"on":"off";e.content.editor.setOption("lineWrap",t)},toggleMatchBrackets:e=>{const t=!e.content.editor.getOption("matchBrackets");e.content.editor.setOption("matchBrackets",t)},lineNumbersToggled:e=>e.content.editor.getOption("lineNumbers"),wordWrapToggled:e=>"off"!==e.content.editor.getOption("lineWrap"),matchBracketsToggled:e=>e.content.editor.getOption("matchBrackets")})}function D(e,n,o,a){const d=t(n);e.fileMenu.consoleCreators.add({tracker:o,createConsoleLabel:e=>a.__("Create Console for Editor"),createConsole:d})}function G(e,t,n,a,r,i){e.runMenu.codeRunners.add({tracker:n,runLabel:e=>r.__("Run Code"),runAllLabel:e=>r.__("Run All Code"),restartAndRunAllLabel:e=>r.__("Restart Kernel and Run All Code"),isEnabled:e=>!!a.find((t=>{var n;return(null===(n=t.sessionContext.session)||void 0===n?void 0:n.path)===e.context.path})),run:()=>t.execute(o.runCode),runAll:()=>t.execute(o.runAllCode),restartAndRunAll:e=>{const n=a.find((t=>{var n;return(null===(n=t.sessionContext.session)||void 0===n?void 0:n.path)===e.context.path}));if(n)return(i||d.sessionContextDialogs).restart(n.sessionContext).then((e=>(e&&t.execute(o.runAllCode),e)))}})}function q(e){e.contextMenu.addItem({command:o.createConsole,selector:".jp-FileEditor"})}function J(e){e.contextMenu.addItem({command:o.markdownPreview,selector:".jp-FileEditor"})}function K(e){e.contextMenu.addItem({command:o.undo,selector:".jp-FileEditor",rank:1})}function Y(e){e.contextMenu.addItem({command:o.redo,selector:".jp-FileEditor",rank:2})}function H(e){e.contextMenu.addItem({command:o.cut,selector:".jp-FileEditor",rank:3})}function Q(e){e.contextMenu.addItem({command:o.copy,selector:".jp-FileEditor",rank:4})}function X(e){e.contextMenu.addItem({command:o.paste,selector:".jp-FileEditor",rank:5})}function Z(e){e.contextMenu.addItem({command:o.selectAll,selector:".jp-FileEditor",rank:6})}e.updateSettings=function(e,t){x=Object.assign(Object.assign({},r.CodeEditor.defaultConfig),e.get("editorConfig").composite),t.notifyCommandChanged()},e.updateTracker=function(e){e.forEach((e=>{n(e.content)}))},e.updateWidget=n,e.addCommands=function(e,t,n,o,d,r,C){a(e,t,0,o),i(e,t,n,o,d),c(e,t,n,o,d),s(e,t,0,o),l(e,t,n,o,d),u(e,t,n,o),m(e,r,n,d),g(e,r,n,d),f(e,r,n,d),w(e,r,n,d),v(e,r,n),F(e,C,n),N(e,C,n),k(e,r,n,d),_(e,r,n,d),M(e,r,n,d),S(e,r,n,d),T(e,r,n,d),I(e,r,n,d)},e.addChangeFontSizeCommand=a,e.addLineNumbersCommand=i,e.addWordWrapCommand=c,e.addChangeTabsCommand=s,e.addMatchBracketsCommand=l,e.addAutoClosingBracketsCommand=u,e.addReplaceSelectionCommand=m,e.addCreateConsoleCommand=g,e.addRunCodeCommand=f,e.addRunAllCodeCommand=w,e.addMarkdownPreviewCommand=v,e.addUndoCommand=k,e.addRedoCommand=_,e.addCutCommand=M,e.addCopyCommand=S,e.addPasteCommand=T,e.addSelectAllCommand=I,e.addCreateNewCommand=F,e.addCreateNewMarkdownCommand=N,e.addLauncherItems=function(e,t){P(e,t),B(e,t)},e.addCreateNewToLauncher=P,e.addCreateNewMarkdownToLauncher=B,e.addPaletteItems=function(e,t){A(e,t),O(e,t),R(e,t),z(e,t)},e.addChangeTabsCommandsToPalette=A,e.addCreateNewCommandToPalette=O,e.addCreateNewMarkdownCommandToPalette=R,e.addChangeFontSizeCommandsToPalette=z,e.addMenuItems=function(e,t,n,o,a,d){j(e,t,o),L(e),$(e),U(e,n),V(e,n),D(e,t,n,o),a&&G(e,t,n,a,o,d)},e.addEditingCommandsToSettingsMenu=j,e.addCreateNewFileToFileMenu=L,e.addCreateNewMarkdownFileToFileMenu=$,e.addUndoRedoToEditMenu=U,e.addEditorViewerToViewMenu=V,e.addConsoleCreatorToFileMenu=D,e.addCodeRunnersToRunMenu=G,e.addContextMenuItems=function(e){q(e),J(e),K(e),Y(e),H(e),Q(e),X(e),Z(e)},e.addCreateConsoleToContextMenu=q,e.addMarkdownPreviewToContextMenu=J,e.addUndoCommandToContextMenu=K,e.addRedoCommandToContextMenu=Y,e.addCutCommandToContextMenu=H,e.addCopyCommandToContextMenu=Q,e.addPasteCommandToContextMenu=X,e.addSelectAllCommandToContextMenu=Z}(w||(w={}));const v={activate:function(e,t,n,o,a,r,i,c,l,u,m){const g=v.id,f=a.load("jupyterlab"),C=new s.FileEditorFactory({editorServices:t,factoryOptions:{name:h,fileTypes:["markdown","*"],defaultFor:["markdown","*"]}}),{commands:p,restored:b,shell:x}=e,k=new d.WidgetTracker({namespace:"editor"});return u&&u.restore(k,{command:"docmanager:open",args:e=>({path:e.context.path,factory:h}),name:e=>e.context.path}),Promise.all([o.load(g),b]).then((([e])=>{w.updateSettings(e,p),w.updateTracker(k),e.changed.connect((()=>{w.updateSettings(e,p),w.updateTracker(k)}))})).catch((e=>{console.error(e.message),w.updateTracker(k)})),C.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{k.save(t)})),k.add(t),w.updateWidget(t.content)})),e.docRegistry.addWidgetFactory(C),k.widgetAdded.connect(((e,t)=>{w.updateWidget(t.content)})),w.addCommands(p,o,f,g,(()=>null!==k.currentWidget&&k.currentWidget===x.currentWidget),k,n),c&&w.addLauncherItems(c,f),i&&w.addPaletteItems(i,f),l&&w.addMenuItems(l,p,k,f,r,m),w.addContextMenuItems(e),k},id:"@jupyterlab/fileeditor-extension:plugin",requires:[r.IEditorServices,c.IFileBrowserFactory,m.ISettingRegistry,f.ITranslator],optional:[i.IConsoleTracker,d.ICommandPalette,l.ILauncher,u.IMainMenu,a.ILayoutRestorer,d.ISessionContextDialogs],provides:s.IEditorTracker,autoStart:!0},k={id:"@jupyterlab/fileeditor-extension:tab-space-status",autoStart:!0,requires:[s.IEditorTracker,m.ISettingRegistry,f.ITranslator],optional:[g.IStatusBar],activate:(e,t,n,o,a)=>{const d=o.load("jupyterlab");if(!a)return;const i=new C.Menu({commands:e.commands}),c="fileeditor:change-tabs",{shell:l}=e,u={insertSpaces:!1,size:4,name:d.__("Indent with Tab")};i.addItem({command:c,args:u});for(const e of[1,2,4,8]){const t={insertSpaces:!0,size:e,name:d._n("Spaces: %1","Spaces: %1",e)};i.addItem({command:c,args:t})}const m=new s.TabSpaceStatus({menu:i,translator:o}),g=e=>{m.model.config=Object.assign(Object.assign({},r.CodeEditor.defaultConfig),e.get("editorConfig").composite)};Promise.all([n.load("@jupyterlab/fileeditor-extension:plugin"),e.restored]).then((([e])=>{g(e),e.changed.connect(g)})),a.registerStatusItem("@jupyterlab/fileeditor-extension:tab-space-status",{item:m,align:"right",rank:1,isActive:()=>!!l.currentWidget&&t.has(l.currentWidget)})}},_=[v,k]}}]);
//# sourceMappingURL=2508.bundle.js.map