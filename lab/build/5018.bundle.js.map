{"version":3,"sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/markdownviewer-extension/lib/index.js"],"names":["CommandIDs","markdownPreview","markdownEditor","FACTORY","plugin","activate","app","restorer","rendermime","settingRegistry","translator","trans","load","commands","docRegistry","addFactory","markdownRendererFactory","tracker","WidgetTracker","namespace","config","Object","assign","MarkdownViewer","updateWidget","widget","keys","forEach","k","_a","setOption","updateSettings","settings","composite","content","id","then","changed","connect","catch","reason","console","error","message","factory","MarkdownViewerFactory","name","primaryFileType","getFileType","fileTypes","defaultRendered","widgetCreated","sender","context","pathChanged","save","add","addWidgetFactory","restore","command","args","path","addCommand","label","__","execute","options","currentWidget","mode","isVisible","PathExt","contextMenu","addItem","selector","provides","IMarkdownViewerTracker","requires","ILayoutRestorer","IRenderMimeRegistry","ISettingRegistry","ITranslator","autoStart"],"mappings":"0KAgBIA,E,8EACJ,SAAWA,GACPA,EAAWC,gBAAkB,sBAC7BD,EAAWE,eAAiB,sBAFhC,CAGGF,IAAeA,EAAa,KAI/B,MAAMG,EAAU,mBAIVC,EAAS,CACXC,SAcJ,SAAkBC,EAAKC,EAAUC,EAAYC,EAAiBC,GAC1D,MAAMC,EAAQD,EAAWE,KAAK,eACxB,SAAEC,EAAQ,YAAEC,GAAgBR,EAElCE,EAAWO,WAAW,EAAAC,yBACtB,MACMC,EAAU,IAAI,EAAAC,cAAc,CAC9BC,UAFc,0BAIlB,IAAIC,EAASC,OAAOC,OAAO,GAAI,EAAAC,eAAA,eAI/B,SAASC,EAAaC,GAClBJ,OAAOK,KAAKN,GAAQO,SAASC,IACzB,IAAIC,EACJJ,EAAOK,UAAUF,EAAwB,QAApBC,EAAKT,EAAOQ,UAAuB,IAAPC,EAAgBA,EAAK,SAM9E,SAASE,EAAeC,GACpBZ,EAASY,EAASC,UAClBhB,EAAQU,SAAQF,IACZD,EAAaC,EAAOS,YAI5BzB,EACKG,KAAKR,EAAO+B,IACZC,MAAMJ,IACPA,EAASK,QAAQC,SAAQ,KACrBP,EAAeC,MAEnBD,EAAeC,MAEdO,OAAOC,IACRC,QAAQC,MAAMF,EAAOG,YAGzB,MAAMC,EAAU,IAAI,EAAAC,sBAAsB,CACtCrC,aACAsC,KAAM3C,EACN4C,gBAAiBjC,EAAYkC,YAAY,YACzCC,UAAW,CAAC,YACZC,gBAAiB,CAAC,cAyDtB,OAvDAN,EAAQO,cAAcb,SAAQ,CAACc,EAAQ3B,KAEnCA,EAAO4B,QAAQC,YAAYhB,SAAQ,KAC1BrB,EAAQsC,KAAK9B,MAGtBD,EAAaC,EAAOS,SACfjB,EAAQuC,IAAI/B,MAErBX,EAAY2C,iBAAiBb,GAExBrC,EAASmD,QAAQzC,EAAS,CAC3B0C,QAAS,kBACTC,KAAMnC,IAAU,CAAGoC,KAAMpC,EAAO4B,QAAQQ,KAAMjB,QAASzC,IACvD2C,KAAMrB,GAAUA,EAAO4B,QAAQQ,OAEnChD,EAASiD,WAAW9D,EAAWC,gBAAiB,CAC5C8D,MAAOpD,EAAMqD,GAAG,oBAChBC,QAASL,IACL,MAAMC,EAAOD,EAAW,KACxB,GAAoB,iBAATC,EAGX,OAAOhD,EAASoD,QAAQ,kBAAmB,CACvCJ,OACAjB,QAASzC,EACT+D,QAASN,EAAc,aAInC/C,EAASiD,WAAW9D,EAAWE,eAAgB,CAC3C+D,QAAS,KACL,MAAMxC,EAASR,EAAQkD,cACvB,IAAK1C,EACD,OAEJ,MAAMoC,EAAOpC,EAAO4B,QAAQQ,KAC5B,OAAOhD,EAASoD,QAAQ,kBAAmB,CACvCJ,OACAjB,QAAS,SACTsB,QAAS,CACLE,KAAM,kBAIlBC,UAAW,KACP,MAAM5C,EAASR,EAAQkD,cACvB,OAAS1C,GAAmD,QAAzC,EAAA6C,QAAA,QAAgB7C,EAAO4B,QAAQQ,QAAoB,GAE1EE,MAAOpD,EAAMqD,GAAG,0BAEpB1D,EAAIiE,YAAYC,QAAQ,CACpBb,QAAS3D,EAAWE,eACpBuE,SAAU,yBAEPxD,GApHPkB,GAAI,8CACJuC,SAAU,EAAAC,uBACVC,SAAU,CACN,EAAAC,gBACA,EAAAC,oBACA,EAAAC,iBACA,EAAAC,aAEJC,WAAW,GAiHf","file":"5018.bundle.js","sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n/**\n * @packageDocumentation\n * @module markdownviewer-extension\n */\nimport { ILayoutRestorer } from '@jupyterlab/application';\nimport { WidgetTracker } from '@jupyterlab/apputils';\nimport { MarkdownViewer, MarkdownViewerFactory, IMarkdownViewerTracker } from '@jupyterlab/markdownviewer';\nimport { IRenderMimeRegistry, markdownRendererFactory } from '@jupyterlab/rendermime';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\nimport { PathExt } from '@jupyterlab/coreutils';\nimport { ITranslator } from '@jupyterlab/translation';\n/**\n * The command IDs used by the markdownviewer plugin.\n */\nvar CommandIDs;\n(function (CommandIDs) {\n    CommandIDs.markdownPreview = 'markdownviewer:open';\n    CommandIDs.markdownEditor = 'markdownviewer:edit';\n})(CommandIDs || (CommandIDs = {}));\n/**\n * The name of the factory that creates markdown viewer widgets.\n */\nconst FACTORY = 'Markdown Preview';\n/**\n * The markdown viewer plugin.\n */\nconst plugin = {\n    activate,\n    id: '@jupyterlab/markdownviewer-extension:plugin',\n    provides: IMarkdownViewerTracker,\n    requires: [\n        ILayoutRestorer,\n        IRenderMimeRegistry,\n        ISettingRegistry,\n        ITranslator\n    ],\n    autoStart: true\n};\n/**\n * Activate the markdown viewer plugin.\n */\nfunction activate(app, restorer, rendermime, settingRegistry, translator) {\n    const trans = translator.load('jupyterlab');\n    const { commands, docRegistry } = app;\n    // Add the markdown renderer factory.\n    rendermime.addFactory(markdownRendererFactory);\n    const namespace = 'markdownviewer-widget';\n    const tracker = new WidgetTracker({\n        namespace\n    });\n    let config = Object.assign({}, MarkdownViewer.defaultConfig);\n    /**\n     * Update the settings of a widget.\n     */\n    function updateWidget(widget) {\n        Object.keys(config).forEach((k) => {\n            var _a;\n            widget.setOption(k, (_a = config[k]) !== null && _a !== void 0 ? _a : null);\n        });\n    }\n    /**\n     * Update the setting values.\n     */\n    function updateSettings(settings) {\n        config = settings.composite;\n        tracker.forEach(widget => {\n            updateWidget(widget.content);\n        });\n    }\n    // Fetch the initial state of the settings.\n    settingRegistry\n        .load(plugin.id)\n        .then((settings) => {\n        settings.changed.connect(() => {\n            updateSettings(settings);\n        });\n        updateSettings(settings);\n    })\n        .catch((reason) => {\n        console.error(reason.message);\n    });\n    // Register the MarkdownViewer factory.\n    const factory = new MarkdownViewerFactory({\n        rendermime,\n        name: FACTORY,\n        primaryFileType: docRegistry.getFileType('markdown'),\n        fileTypes: ['markdown'],\n        defaultRendered: ['markdown']\n    });\n    factory.widgetCreated.connect((sender, widget) => {\n        // Notify the widget tracker if restore data needs to update.\n        widget.context.pathChanged.connect(() => {\n            void tracker.save(widget);\n        });\n        // Handle the settings of new widgets.\n        updateWidget(widget.content);\n        void tracker.add(widget);\n    });\n    docRegistry.addWidgetFactory(factory);\n    // Handle state restoration.\n    void restorer.restore(tracker, {\n        command: 'docmanager:open',\n        args: widget => ({ path: widget.context.path, factory: FACTORY }),\n        name: widget => widget.context.path\n    });\n    commands.addCommand(CommandIDs.markdownPreview, {\n        label: trans.__('Markdown Preview'),\n        execute: args => {\n            const path = args['path'];\n            if (typeof path !== 'string') {\n                return;\n            }\n            return commands.execute('docmanager:open', {\n                path,\n                factory: FACTORY,\n                options: args['options']\n            });\n        }\n    });\n    commands.addCommand(CommandIDs.markdownEditor, {\n        execute: () => {\n            const widget = tracker.currentWidget;\n            if (!widget) {\n                return;\n            }\n            const path = widget.context.path;\n            return commands.execute('docmanager:open', {\n                path,\n                factory: 'Editor',\n                options: {\n                    mode: 'split-right'\n                }\n            });\n        },\n        isVisible: () => {\n            const widget = tracker.currentWidget;\n            return ((widget && PathExt.extname(widget.context.path) === '.md') || false);\n        },\n        label: trans.__('Show Markdown Editor')\n    });\n    app.contextMenu.addItem({\n        command: CommandIDs.markdownEditor,\n        selector: '.jp-RenderedMarkdown'\n    });\n    return tracker;\n}\n/**\n * Export the plugin as default.\n */\nexport default plugin;\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}