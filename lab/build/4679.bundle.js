(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[4679],{34679:(e,t,o)=>{"use strict";o.r(t),o.d(t,{fileUploadStatus:()=>v,default:()=>x});var r,n=o(93226),a=o(80430),i=o(82090),c=o(58611),d=o(32364),s=o(59586),l=o(96987),m=o(39232),u=o(82113),p=o(86082),h=o(4324),w=o(62867),f=o(97745),g=o(27529);!function(e){e.copy="filebrowser:copy",e.copyDownloadLink="filebrowser:copy-download-link",e.createLauncher="filebrowser:create-main-launcher",e.cut="filebrowser:cut",e.del="filebrowser:delete",e.download="filebrowser:download",e.duplicate="filebrowser:duplicate",e.hideBrowser="filebrowser:hide-main",e.goToPath="filebrowser:go-to-path",e.openPath="filebrowser:open-path",e.open="filebrowser:open",e.openBrowserTab="filebrowser:open-browser-tab",e.paste="filebrowser:paste",e.createNewDirectory="filebrowser:create-new-directory",e.createNewFile="filebrowser:create-new-file",e.createNewMarkdownFile="filebrowser:create-new-markdown-file",e.rename="filebrowser:rename",e.share="filebrowser:share-main",e.copyPath="filebrowser:copy-path",e.showBrowser="filebrowser:activate",e.shutdown="filebrowser:shutdown",e.toggleBrowser="filebrowser:toggle-main",e.toggleNavigateToCurrentDirectory="filebrowser:toggle-navigate-to-current-directory",e.toggleLastModified="filebrowser:toggle-last-modified",e.search="filebrowser:search"}(r||(r={}));const y={activate:function(e,t,o,n,i,c,d,s,l,m){const u=d.load("jupyterlab"),p=t.defaultBrowser,{commands:y}=e;i.add(p,_),function(e,t,o,n,i,c,d,s){const l=c.load("jupyterlab"),{docRegistry:m,commands:u}=e,{defaultBrowser:p,tracker:f}=t;u.addCommand(r.del,{execute:()=>{const e=f.currentWidget;if(e)return e.delete()},icon:h.closeIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Delete"),mnemonic:0}),u.addCommand(r.copy,{execute:()=>{const e=f.currentWidget;if(e)return e.copy()},icon:h.copyIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Copy"),mnemonic:0}),u.addCommand(r.cut,{execute:()=>{const e=f.currentWidget;if(e)return e.cut()},icon:h.cutIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Cut")}),u.addCommand(r.download,{execute:()=>{const e=f.currentWidget;if(e)return e.download()},icon:h.downloadIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Download")}),u.addCommand(r.duplicate,{execute:()=>{const e=f.currentWidget;if(e)return e.duplicate()},icon:h.copyIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Duplicate")}),u.addCommand(r.hideBrowser,{execute:()=>{const e=f.currentWidget;e&&!e.isHidden&&o.collapseLeft()}}),u.addCommand(r.goToPath,{execute:async e=>{var o;const n=e.path||"",a=!(null!==(o=null==e?void 0:e.dontShowBrowser)&&void 0!==o&&o);try{if("directory"!==(await C.navigateToPath(n,t,c)).type&&a){const e=C.getBrowserForPath(n,t);if(e){e.clearSelectedItems();const t=n.split("/"),o=t[t.length-1];o&&await e.selectItemByName(o)}}}catch(e){console.warn(`${r.goToPath} failed to go to: ${n}`,e)}if(a)return u.execute(r.showBrowser,{path:n})}}),u.addCommand(r.openPath,{label:e=>e.path?l.__("Open %1",e.path):l.__("Open from Pathâ€¦"),caption:e=>e.path?l.__("Open %1",e.path):l.__("Open from path"),execute:async e=>{var o;let n;if(n=(null==e?void 0:e.path)?e.path:null!==(o=(await a.InputDialog.getText({label:l.__("Path"),placeholder:"/path/relative/to/jlab/root",title:l.__("Open Path"),okLabel:l.__("Open")})).value)&&void 0!==o?o:void 0,n)try{const o="/"!==n&&n.endsWith("/");o&&(n=n.slice(0,n.length-1));const a=C.getBrowserForPath(n,t),{services:i}=a.model.manager,c=await i.contents.get(n,{content:!1});if(o&&"directory"!==c.type)throw new Error(`Path ${n}/ is not a directory`);if(await u.execute(r.goToPath,{path:n,dontShowBrowser:e.dontShowBrowser}),"directory"===c.type)return;return u.execute("docmanager:open",{path:n})}catch(e){return e.response&&404===e.response.status&&(e.message=l.__("Could not find path: %1",n)),(0,a.showErrorMessage)(l.__("Cannot open"),e)}}}),d&&d.addItem({command:r.openPath,category:l.__("File Operations")}),u.addCommand(r.open,{execute:e=>{const t=e.factory||void 0,o=f.currentWidget;if(!o)return;const{contents:r}=o.model.manager.services;return Promise.all((0,w.toArray)((0,w.map)(o.selectedItems(),(e=>{if("directory"===e.type){const t=r.localPath(e.path);return o.model.cd(`/${t}`)}return u.execute("docmanager:open",{factory:t,path:e.path})}))))},icon:e=>{var t;const o=e.factory||void 0;if(o){const e=m.getFileType(o);return null===(t=null==e?void 0:e.icon)||void 0===t?void 0:t.bindprops({stylesheet:"menuItem"})}return h.folderIcon.bindprops({stylesheet:"menuItem"})},label:e=>e.label||e.factory||l.__("Open"),mnemonic:0}),u.addCommand(r.openBrowserTab,{execute:()=>{const e=f.currentWidget;if(e)return Promise.all((0,w.toArray)((0,w.map)(e.selectedItems(),(e=>u.execute("docmanager:open-browser-tab",{path:e.path})))))},icon:h.addIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Open in New Browser Tab"),mnemonic:0}),u.addCommand(r.copyDownloadLink,{execute:()=>{const e=f.currentWidget;if(e)return e.model.manager.services.contents.getDownloadUrl(e.selectedItems().next().path).then((e=>{a.Clipboard.copyToSystem(e)}))},icon:h.copyIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Copy Download Link"),mnemonic:0}),u.addCommand(r.paste,{execute:()=>{const e=f.currentWidget;if(e)return e.paste()},icon:h.pasteIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Paste"),mnemonic:0}),u.addCommand(r.createNewDirectory,{execute:()=>{const e=f.currentWidget;if(e)return e.createNewDirectory()},icon:h.newFolderIcon.bindprops({stylesheet:"menuItem"}),label:l.__("New Folder")}),u.addCommand(r.createNewFile,{execute:()=>{const{model:{path:e}}=p;u.execute("docmanager:new-untitled",{path:e,type:"file",ext:"txt"})},icon:h.textEditorIcon.bindprops({stylesheet:"menuItem"}),label:l.__("New File")}),u.addCommand(r.createNewMarkdownFile,{execute:()=>{const{model:{path:e}}=p;u.execute("docmanager:new-untitled",{path:e,type:"file",ext:"md"})},icon:h.markdownIcon.bindprops({stylesheet:"menuItem"}),label:l.__("New Markdown File")}),u.addCommand(r.rename,{execute:e=>{const t=f.currentWidget;if(t)return t.rename()},icon:h.editIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Rename"),mnemonic:0}),u.addCommand(r.copyPath,{execute:()=>{const e=f.currentWidget;if(!e)return;const t=e.selectedItems().next();t&&a.Clipboard.copyToSystem(t.path)},isVisible:()=>!!f.currentWidget&&void 0!==f.currentWidget.selectedItems().next,icon:h.fileIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Copy Path")}),u.addCommand(r.showBrowser,{execute:e=>{const r=e.path||"",n=C.getBrowserForPath(r,t);if(n)if(p!==n){const e=["left","right"];for(const t of e){const e=o.widgets(t);let r=e.next();for(;r;){if(r.contains(n))return void o.activateById(r.id);r=e.next()}}}else o.activateById(p.id)}}),u.addCommand(r.shutdown,{execute:()=>{const e=f.currentWidget;if(e)return e.shutdownKernels()},icon:h.stopIcon.bindprops({stylesheet:"menuItem"}),label:l.__("Shut Down Kernel")}),u.addCommand(r.toggleBrowser,{execute:()=>p.isHidden?u.execute(r.showBrowser,void 0):u.execute(r.hideBrowser,void 0)}),u.addCommand(r.createLauncher,{label:l.__("New Launcher"),execute:()=>C.createLauncher(u,p)}),u.addCommand(r.toggleNavigateToCurrentDirectory,{label:l.__("Show Active File in File Browser"),isToggled:()=>p.navigateToCurrentDirectory,execute:()=>{const e=!p.navigateToCurrentDirectory;return i.set("@jupyterlab/filebrowser-extension:browser","navigateToCurrentDirectory",e).catch((e=>{console.error("Failed to set navigateToCurrentDirectory setting")}))}}),u.addCommand(r.toggleLastModified,{label:l.__("Toggle Last Modified Column"),execute:()=>{const e=a.DOMUtils.findElement(document.body,"jp-id-modified"),t=a.DOMUtils.findElements(document.body,"jp-DirListing-itemModified");if(e.classList.contains("jp-LastModified-hidden")){e.classList.remove("jp-LastModified-hidden");for(let e=0;e<t.length;e++)t[e].classList.remove("jp-LastModified-hidden")}else{e.classList.add("jp-LastModified-hidden");for(let e=0;e<t.length;e++)t[e].classList.add("jp-LastModified-hidden")}}}),u.addCommand(r.search,{label:l.__("Search on File Names"),execute:()=>alert("search")}),s&&s.settingsMenu.addGroup([{command:r.toggleNavigateToCurrentDirectory}],5),d&&d.addItem({command:r.toggleNavigateToCurrentDirectory,category:l.__("File Operations")});class y extends g.Menu{onBeforeAttach(e){this.clearItems();const t=f.currentWidget?y._intersection((0,w.map)(f.currentWidget.selectedItems(),(e=>y._getFactories(e)))):void 0;t&&t.forEach((e=>{this.addItem({args:{factory:e},command:r.open})})),super.onBeforeAttach(e)}static _getFactories(e){var t;const o=m.preferredWidgetFactories(e.path).map((e=>e.name)),r=null===(t=m.getWidgetFactory("notebook"))||void 0===t?void 0:t.name;return r&&"notebook"===e.type&&-1===o.indexOf(r)&&o.unshift(r),o}static _intersection(e){const t=e.next();if(!t)return;const o=new Set(t);return(0,w.reduce)(e,((e,t)=>new Set(t.filter((t=>e.has(t))))),o)}}const b=".jp-DirListing-content",I=".jp-DirListing-item[data-isdir]",v='.jp-DirListing-item[data-isdir="false"]';e.contextMenu.addItem({command:r.createNewDirectory,selector:b,rank:1}),e.contextMenu.addItem({command:r.createNewFile,selector:b,rank:2}),e.contextMenu.addItem({command:r.createNewMarkdownFile,selector:b,rank:3}),e.contextMenu.addItem({command:r.paste,selector:b,rank:4}),e.contextMenu.addItem({command:r.open,selector:I,rank:1});const _=new y({commands:u});_.title.label=l.__("Open With"),e.contextMenu.addItem({type:"submenu",submenu:_,selector:v,rank:2}),e.contextMenu.addItem({command:r.openBrowserTab,selector:v,rank:3}),e.contextMenu.addItem({command:r.rename,selector:I,rank:4}),e.contextMenu.addItem({command:r.del,selector:I,rank:5}),e.contextMenu.addItem({command:r.cut,selector:I,rank:6}),e.contextMenu.addItem({command:r.copy,selector:v,rank:7}),e.contextMenu.addItem({command:r.duplicate,selector:v,rank:8}),e.contextMenu.addItem({command:r.download,selector:v,rank:9}),e.contextMenu.addItem({command:r.shutdown,selector:v,rank:10}),e.contextMenu.addItem({command:r.share,selector:I,rank:11}),e.contextMenu.addItem({command:r.copyPath,selector:I,rank:12}),e.contextMenu.addItem({command:r.copyDownloadLink,selector:v,rank:13}),e.contextMenu.addItem({command:r.toggleLastModified,selector:".jp-DirListing-header",rank:14})}(e,t,n,0,c,d,l,m),p.title.icon=h.folderIcon;const b=()=>{const t=(0,w.find)(e.commands.keyBindings,(e=>e.command===r.toggleBrowser));if(t){const e=f.CommandRegistry.formatKeystroke(t.keys.join(" "));p.title.caption=u.__("File Browser (%1)",e)}else p.title.caption=u.__("File Browser")};b(),e.commands.keyBindingChanged.connect((()=>{b()})),n.add(p,"left",{rank:100}),n.restored.then((e=>{e.fresh&&"single-document"!==n.mode&&y.execute(r.showBrowser,void 0)})),Promise.all([e.restored,p.model.restored]).then((()=>{function e(){n.isEmpty("main")&&y.hasCommand("launcher:create")&&C.createLauncher(y,p)}n.layoutModified.connect((()=>{e()}));let a=!1,i=!0;c.load("@jupyterlab/filebrowser-extension:browser").then((e=>{e.changed.connect((e=>{a=e.get("navigateToCurrentDirectory").composite,p.navigateToCurrentDirectory=a})),a=e.get("navigateToCurrentDirectory").composite,p.navigateToCurrentDirectory=a,e.changed.connect((e=>{i=e.get("useFuzzyFilter").composite,p.useFuzzyFilter=i})),i=e.get("useFuzzyFilter").composite,p.useFuzzyFilter=i})),n.currentChanged.connect((async(e,i)=>{var c;if(a&&i.newValue){const{newValue:e}=i,a=o.contextForWidget(e);if(a){const{path:e}=a;try{await C.navigateToPath(e,t,d),null===(c=n.currentWidget)||void 0===c||c.activate()}catch(t){console.warn(`${r.goToPath} failed to open: ${e}`,t)}}}})),s&&p.model.pathChanged.connect(((e,t)=>{s(t.newValue)})),e()}))},id:"@jupyterlab/filebrowser-extension:browser",requires:[d.IFileBrowserFactory,c.IDocumentManager,n.ILabShell,n.ILayoutRestorer,l.ISettingRegistry,p.ITranslator],optional:[n.ITreePathUpdater,a.ICommandPalette,s.IMainMenu],autoStart:!0},b={activate:async function(e,t,o,r,n,i){const c=o.load("jupyterlab"),{commands:s}=e,l=new a.WidgetTracker({namespace:_}),m=(e,n={})=>{var i;const m=new d.FilterFileBrowserModel({translator:o,auto:null===(i=n.auto)||void 0===i||i,manager:t,driveName:n.driveName||"",refreshInterval:n.refreshInterval,state:null===n.state?void 0:n.state||r||void 0}),u=n.restore,p=new d.FileBrowser({id:e,model:m,restore:u,translator:o}),w=new a.ToolbarButton({icon:h.addIcon,onClick:()=>{if(s.hasCommand("launcher:create"))return C.createLauncher(s,p)},tooltip:c.__("New Launcher"),actualOnClick:!0});return p.toolbar.insertItem(0,"launch",w),l.add(p),p},u=m("filebrowser",{auto:!1,restore:!1});return C.restoreBrowser(u,s,n,i),{createFileBrowser:m,defaultBrowser:u,tracker:l}},id:"@jupyterlab/filebrowser-extension:factory",provides:d.IFileBrowserFactory,requires:[c.IDocumentManager,p.ITranslator],optional:[m.IStateDB,n.IRouter,n.JupyterFrontEnd.ITreeResolver]},I={activate:function(e,t,o){const n=o.load("jupyterlab"),{commands:c}=e,{tracker:d}=t;c.addCommand(r.share,{execute:()=>{const e=d.currentWidget,t=null==e?void 0:e.selectedItems().next();t&&a.Clipboard.copyToSystem(i.URLExt.normalize(i.PageConfig.getUrl({mode:"single-document",workspace:i.PageConfig.defaultWorkspace,treePath:t.path})))},isVisible:()=>!!d.currentWidget&&1===(0,w.toArray)(d.currentWidget.selectedItems()).length,icon:h.linkIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Copy Shareable Link")})},id:"@jupyterlab/filebrowser-extension:share-file",requires:[d.IFileBrowserFactory,p.ITranslator],autoStart:!0},v={id:"@jupyterlab/filebrowser-extension:file-upload-status",autoStart:!0,requires:[d.IFileBrowserFactory,p.ITranslator],optional:[u.IStatusBar],activate:(e,t,o,r)=>{if(!r)return;const n=new d.FileUploadStatus({tracker:t.tracker,translator:o});r.registerStatusItem("@jupyterlab/filebrowser-extension:file-upload-status",{item:n,align:"middle",isActive:()=>!!n.model&&n.model.items.length>0,activeStateChanged:n.model.stateChanged})}},_="filebrowser",x=[b,y,I,v];var C;!function(e){e.createLauncher=function(e,t){const{model:o}=t;return e.execute("launcher:create",{cwd:o.path}).then((e=>(o.pathChanged.connect((()=>{e.content&&(e.content.cwd=o.path)}),e),e)))},e.getBrowserForPath=function(e,t){const{defaultBrowser:o,tracker:n}=t,a=o.model.manager.services.contents.driveName(e);if(a){return n.find((e=>e.model.driveName===a))||void console.warn(`${r.goToPath} failed to find filebrowser for path: ${e}`)}return o},e.navigateToPath=async function(t,o,r){const n=r.load("jupyterlab"),a=e.getBrowserForPath(t,o);if(!a)throw new Error(n.__("No browser for path"));const{services:c}=a.model.manager,d=c.contents.localPath(t);await c.ready;const s=await c.contents.get(t,{content:!1}),{model:l}=a;return await l.restored,"directory"===s.type?await l.cd(`/${d}`):await l.cd(`/${i.PathExt.dirname(d)}`),s},e.restoreBrowser=async function(e,t,o,n){const a="jp-mod-restoring";if(e.addClass(a),!o)return await e.model.restore(e.id),await e.model.refresh(),void e.removeClass(a);const i=async()=>{o.routed.disconnect(i);const c=await(null==n?void 0:n.paths);(null==c?void 0:c.file)||(null==c?void 0:c.browser)?(await e.model.restore(e.id,!1),c.file&&await t.execute(r.openPath,{path:c.file,dontShowBrowser:!0}),c.browser&&await t.execute(r.openPath,{path:c.browser,dontShowBrowser:!0})):(await e.model.restore(e.id),await e.model.refresh()),e.removeClass(a)};o.routed.connect(i)}}(C||(C={}))}}]);
//# sourceMappingURL=4679.bundle.js.map